<link rel="stylesheet" type="text/css" href="/css/jquery.auto-complete.css" />
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="/js/jquery.auto-complete.js"></script>
<form action="/job/result" method="get">
	<input type="text" class="form-control search-slt" id="keywords" placeholder="program name" >
    <div class="alert alert-success">
    	<input type="submit"  value="검색"/>
    </div>
    <div style="
			BORDER-RIGHT:#ff0000 1px solid;
			BORDER-TOP:#ff0000 1px solid;
			BORDER-LEFT:#ff0000 1px solid;
			BORDER-BOTTOM:#ff0000 1px solid;
			background: white;
     		color: black;
			">
		<div id="tags">
		</div>
		<input type="hidden" id="tags-inp" name="keywords" value=""/>
	</div>   
</form>
<script>
	$(function(){
		
		
		$("#keywords").keydown(function() {
		    if (event.keyCode === 13) {
		        event.preventDefault();
		    }
		});
		function parseKeyword(){
			var str="";
			$("#tags > .tag-skill").each(function(index, item){ 
				if(index!=0)
					str+="%20";
				str+=$(item).text();
			});
			$("#tags-inp").val(str);
			console.log(str);
		};
         $('#keywords').autoComplete({
             minChars: 1,
             source: function(term, suggest){
                 $.ajax({
                     type:"get",
                     dataType:"json",                  //data를 json으로 return 받음.
                     url:"/search/auto/category",          //json으로 데이터를 반환해야한다.
                     data:{keyword : term},
                     success:function(data){
                     			suggest(data.result);
                     		}
             	});
             },
             
             onSelect: function(e,term,item) {
            	 console.log("Selected:" + term);
            	 var str=$('#tags').html();
            	 console.log("str: "+str);
            	 str+="<div class='tag-skill'>"+term+"</div>";
            	 $('#tags').html(str);
            	 $('#keywords').val("");
            	 parseKeyword();
             }
         });
         $("#tags").delegate(".tag-skill","click",function(){
        	 console.log($(this).html());
        	 $(this).remove();
        	 parseKeyword()
         });
	});
</script>        

